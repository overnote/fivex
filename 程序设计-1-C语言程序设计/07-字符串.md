# 07-字符串

## 一 字符数组

C 语言中没有字符串这种数据类型，可以通过 char 的数组来替代。但是只有数字 `'\0'` 结尾的字符数组才是字符串，所以字符串是一个特殊的字符数组。

```c++
#include <stdio.h>

int main(){

  // 普通字符数组
  char c1[] = { 'c', ' ', 'p', 'r', 'o', 'g' };
  printf("c1 = %s\n", c1); //乱码，因为没有以 '\0' 结束符

  // 以 0 结尾的字符数组，字符春
  char c2[] = { 'c', ' ', 'p', 'r', 'o', 'g', '\0'};
  printf("c2 = %s\n", c2);

  //字符串处理以'\0'作为结束符，后面的'h', 'l', 'l', 'e', 'o'不会输出
  char c3[] = { 'c', ' ', 'p', 'r', 'o', 'g', '\0', 'h', 'l', 'l', 'e', 'o', '\0'};
  printf("c3 = %s\n", c3);

  return 0;
}
```

在实际开发中，人们关心的往往是字符串的有效长度而不是字符数组的长度，例如定义一个字符串数组长度为 100，实际有效字符只有 40 个，为了表示字符串的实际长度，C 语言规定了一个 `字符串结束标志` ，以字符 `'\0'` 作为结束标志，即计入数组中第 10 个元素第一次出现字符`'\0'`，那么该数组的有效字符为 9 个，这 9 个元素组成了字符串。

贴士：`'\0'`在 ASCII 码中是一个空操作符，正好在 C 中可以代表什么都不做。

## 二 字符串输入输出

输入:

```c++
char str[100];
printf("input string1 : \n");

// scanf(“%s”,str)默认以空格分隔
scanf("%s", str);
printf("output:%s\n", str);
```

## 三 常见字符串处理函数

```c
// 获取字符串长度，不包含结束符'\0'
strlen(str1);

// 输出字符串
char str1[] = {"chaina\n beijing"};
puts(str1);      // 标准设备输出s字符串，在输出完成后自动输出一个'\n'
fputs(str1);     // 作用同puts，但 字符串结束符 '\0'  不写入文件，示例 fputs("hello world", stdout);

// 输入字符串， scanf函数不允许输入空格，gets允许空格
char str2[];
gets(str2);      // 返回str2的起始地址，作用：从标准输入读入字符，并保存到s指定的内存空间，直到出现换行符或读到文件结尾
fgets(str2);     // 作用同gets，但是当读取了size-1字符时，会自动加上'\0'结束，不会出现越界，不过fgets也会把回车也作为字符串的一部分

// 连接字符串，注意 str1必须足够大，以存放str2
strcat(str1, str2);

// 赋值字符串，注意第一个参数要足够大，且必须是数组名形式，参数二可以是变量也可以是字符串常量
char str3[10],str4[] = "china";
strcpy(str3, str4);

// 比较字符串是否相等
strcmp(str1, str2);

// 转换为小写
strlwr(str1);

// 转换为大写
strupr(str2);
```

## 四 字符串常量

字符串常量是由双引号括起来的字符序列，如“china”、“C program”，“$12.5”等都是合法的字符串常量。

字符串常量与字符常量不同：

- 'a'为字符常量，
- "a"为字符串常量，其内部结构为：`'a''\0'`

每个字符串的结尾，编译器会自动的添加一个结束标志位'\0'，即 "a" 包含两个字符'a'和'\0'
